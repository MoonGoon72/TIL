> [!note]
> ## 21. 사용자 인터페이스(UI) 테스트와 단위(Unit) 테스트의 차이점은 무엇인가요?
> - XCTest 프레임워크를 사용하여 테스트를 작성하는 방법은 무엇인가요?
> - 테스트 주도 개발(TDD)의 장점은 무엇인가요?
> - 의존성 주입(Dependency Injection)을 활용하여 테스트 가능한 코드를 작성하는 방법은 무엇인가요?
### 단위(Unit) Test
#### 정의
- 개별 함수, 메서드, 클래스 등 개별적인 작은 단위의 코드가 기대한 대로 동작하는지 확인하는 테스트
- 보통 **비즈니스 로직**이나 **알고리즘**이 테스트 대상
#### 특징
- 빠르고 실행 비용이 낮음
- 테스트 대상을 잘게 나누고, **외부 의존성**은 **Mocking 등을 통해 격리**
- 코드 리팩터링이나 유지보수에 강력한 안전망 제공
### UI Test
#### 정의
- 실제 사용자처럼 앱의 **UI를 조작하고 화면상의 요소가 잘 동작하는지 검증**하는 테스트
- 버튼 클릭, 텍스트 입력, 화면 전환 등 **앱의 동작 흐름과 사용자 경험**을 테스트
#### 특징
- 실행 시간이 비교적 길고 리소스를 많이 사용
- 테스트 환경 설정(ex. 시뮬레이터, 실제 기기)이 필요
- 회귀 테스트 및 사용자 흐름 검증에 효과적
### 단위 (Unit) 테스트와 사용자 인터페이스 (UI) 테스트의 차이
| 항목             | 단위 테스트             | UI 테스트                    |
| -------------- | ------------------ | ------------------------- |
| 대상             | 함수, 메서드 등 코드 단위    | 화면 요소, 사용자 흐름             |
| 속도             | 빠름                 | 느림                        |
| 의존성            | 외부 의존성 제거(Mock 사용) | 실제 앱 동작 필요                |
| 신뢰성            | 로직의 정확성 검증         | 사용자 인터페이스의 작동 검증          |
| 도구             | XCTest             | XCUITest                  |
| 에러 발생 시 파악 용이성 | 비교적 쉬움 (로직 한정)     | 어렵거나 원인 추적 시간이 더 걸릴 수 있음 |
### XCTest 프레임워크를 사용하여 테스트를 작성하는 방법
![](https://i.imgur.com/oVF7vZf.png)
Targets -> Add a target 을 통해 UI Test 혹은 Unit Test를 추가할 수 있습니다.

- `setUp()`: 기본 값을 생성할 때 사용합니다. (객체 인스턴스 생성, db 초기화 등)
- `tearDown()`: 초기 상태로 복원할 때 사용합니다. (파일 닫기, 연결, 새로 만든 항목 제거 등)

##### XCTest 실행 흐름
![](https://i.imgur.com/qdnqGCX.png)
#### XCTAssert: 결과 값을 검증하는 방법
```swift
// 두 값이 같은지 or 다른지 검증합니다.
XCTAssertEqual(expression1: T, expression2: T, message: String)
XCTAssertNotEqual(expression1: T, expression2: T, message: String)

// 두 값이 지정한 범위 accuracy 사이에 있는지 확인합니다.
XCTAssertEqual(expression1: T, expression2: T, accuracy: T, message: String)
XCTAssertNotEqual(expression1: T, expression2: T, accuracy: T, message: String)

// 조건이 참인지 거짓인지 확인합니다.
XCTAssertTrue(expression: bool, message: String)
XCTAssertFalse(expression: bool, message: String)

// 값의 nil 여부를 확인합니다.
XCTAssertNil(expression: Any?, message: String)
XCTAssertNotNil(expression: Any?, message: String)
```
### 테스트 주도 개발 (TDD)
#### 장점
- **신뢰할 수 있는 코드**와 **빠른 피드백 루프** 제공
- 테스트 코드를 먼저 작성하면 자연스럽게 **명확한 요구사항 정의**가 이루어지고, 이를 기준으로 구현하게 되어 불필요한 코드가 줄어듦
- 리팩토링 시, 기존 기능이 깨지지 않았는지 **바로 확인**할 수 있어, 유지보수성과 확장성이 높아짐
- 디버깅 시간이 줄고, 버그를 초기에 잡을 수 있어 **전체 개발 효율 상승**
### 의존성 주입 (Dependecy Injection)을 활용하여 테스트 가능한 코드를 작성하는 방법
- 실제 객체 대신 **Mock 객체**를 주입하여, 외부 의존성을 테스트 가능한 형태(Mock)로 대체하여 단위 테스트 가능

> [!note]
> ## 22. Xcode에서 Instruments를 사용하여 앱의 성능을 분석하는 방법은 무엇인가요?
> - Time Profiler를 사용하여 성능 이슈를 찾는 방법을 설명해주세요
> - Allocations Instrument를 사용하여 메모리 누수를 탐지하는 방법은 무엇인가요?
> - Leaks Instrument를 사용하여 메모리 누수를 찾는 방법은 무엇인가요?
### Instruments
Xcode에서 제공하는 앱의 성능과 메모리 사용을 분석할 수 있는 도구.
#### Hang
Hang이란 사용자의 상호 작용을 처리하는데 눈어 띄게 지연되어 응답이 없는 기간을 의미합니다.
### Time Profiler
- 어떤 앱이 어떤 종류의 작업을 수행하고 있는지, 얼마나 많은 작업을 수행하는지 파악할 수 있는 도구.
- 시스템의 각 CPU를 일정한 간격으로 샘플링하는 방식으로 동작.
##### 함수 실행 시간
일반적으로 **실행하는데 1ms 미만이 걸리는 작업 청크**는**Dispatch나 async** 하는 것이 **권장되지 않습니다**. 앱에서 1ms 청크를 많이 계산하여 합산하면 중단이 발생하는 경우가 있을 수 있습니다. 이 경우 여러 작업 청크를 결합하여 함께 발송하면 각 항목에 대해 새 작업을 만들 필요가 없습니다.
#### 성능 이슈를 찾는 방법
![](https://i.imgur.com/1j41Zdr.png)
Xcode의 Run을 홀드하여 Profile로 변경합니다. 혹은 Instruments를 직접 실행해도 좋습니다.
![](https://i.imgur.com/8DvZifB.png)
Time Profiler 템플릿을 선택합니다.
![](https://i.imgur.com/05yIBBE.png)
Record 버튼을 누르면 기기(시뮬레이터)에서 앱이 실행됩니다.

<video controls src="https://docs-assets.developer.apple.com/published/df4386fda9ca839c15d4580e3936789d/02-02-start-recording.mp4" />

<video controls src="https://docs-assets.developer.apple.com/published/bcbc9eb4e9ab7e7bb61be74530f6684a/02-02-hang-recording.mp4" />
이런 식으로 Hang 이걸리는 부분을 찾을 수 있습니다.
![](https://i.imgur.com/r0siQ8a.png)
가장 무거운 스택 추적의 일부 함수 이름은 기본 텍스트 색상으로 표시되는 반면 다른 함수 이름은 회색으로 표시됩니다.
원본 코드에 대한 정보가 Instruments에 있다면 색상으로 표시됩니다. (개발자가 작성한 코드)

<video controls src="https://docs-assets.developer.apple.com/published/1d519114f76521ee2b0b972ef56c068a/03-02-select-heaviest-stack-trace-row.mp4" />
스크롤을 통해 함수 호출 또는 심볼을 찾아서 해당 부분에 의해 Hang이 유발됨을 알 수 있습니다.

<video controls src="https://docs-assets.developer.apple.com/published/7dad22b6dfd6131e38458e6569390e0d/05-01-drag-view-body-instrument-to-document.mp4" />
SwiftUI의 View와 관련된 경우 Instrument를 추가하여 확인 가능합니다.

<video controls src="https://docs-assets.developer.apple.com/published/0de616cbf5dae12e69bbb11d8db889b9/05-01-expand-thumbnail-body-duration-in-summary.mp4" />
[Apple - Instruments Tutorials](https://developer.apple.com/tutorials/instruments/ensuring-work-executes-in-a-background-thread)
### Allocations Instrument
- 앱이 생성하고 사용하는 객체의 수, 크기, 생명 주기를 분석하는 데 사용
![](https://i.imgur.com/Esxqc7d.png)
Instruments 실행 후 Allocations template을 선택합니다.

### Leaks Instrument
- Retain cycle, 강한 참조로 인해 메모리에서 해제되지 않는 객체를 탐지
![](https://i.imgur.com/vyP9IJ9.png)
Instruments 실행 후 Lecks template을 선택합니다.
![](https://i.imgur.com/ssNvGGe.png)
[출처](https://ios-development.tistory.com/604)
memory leak이 발생하는 경우 빨간색 x표시가 보입니다.

> [!note]
> ## 23. Swift의 제네릭(Generic)에 대해 설명해주세요.
> - 제네릭을 사용하는 이유는 무엇인가요?
> - 제네릭 타입 파라미터와 제약 조건을 설정하는 방법은 무엇인가요?
> - 제니릭을 사용할 때의 장점과 주의할 점은 무엇인가요?

> [!note]
> ## 24. Swift의 클로저와 함수의 차이점은 무엇인가요?
> - 클로저가 일급 객체(First-Class Citizen)인 이유는 무엇인가요?
> - 함수형 프로그래밍 패러다임에서 클로저가 어떻게 활용되나요?

> [!note]
> ## 25. 동시성 프로그래밍에서 동기(Synchronous)와 비동기(Asynchronous)의 차이점은 무엇인가요?
> - iOS에서 비동기 작업을 처리하는 방법은 무엇인가요?
> - 세마포어(Semaphore)와 뮤텍스(Mutex)의 차이점은 무엇인가요?

